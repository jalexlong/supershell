title: "Module 1: Awakening"
version: "1.0.0"
description: "Boot up your system and learn to move."

intro: |
  [POWER ON] ...
  [LOADING CORE] ... 100%

  Hello, User. Welcome to the Construct.
  Your visual sensors are offline. It is pitch black.

  We need to activate your scanner.
  The command for this is 'ls' (List Segments).

chapters:
  # --- CHAPTER 1: SIGHT (ls) ---
  - title: "System Boot"
    intro: "" # Optional, since course intro handles the start
    setup_actions:
      - type: ResetWorld
      - type: CreateDir
        path: "Memory_Bank"
      - type: CreateDir
        path: "Memory_Bank/Sector_A"
      - type: CreateFile
        path: "Memory_Bank/Sector_A/welcome_packet.txt"
        content: |
          SYSTEM MESSAGE:
          Welcome, Unit 734.
          Mission: Repair broken nodes.
    tasks:
      - objective: "Activate Visual Sensors"
        description: "Run the 'ls' command to see files."
        success_msg: "Sensors Online. Environment visible."
        conditions:
          # Matches "ls", "ls -l", "ls -a", etc.
          - type: CommandMatches
            pattern: "^ls.*"

    outro: |
      [SENSORS ONLINE]
      Excellent. The darkness clears.
      You should see a blue item named 'Memory_Bank'.

  # --- CHAPTER 2: MOVEMENT (cd) ---
  - title: "Motor Functions"
    intro: |
      Now that you can see, let's test your motor functions.
      To enter a folder, we use the Change Directory command: 'cd'.
    tasks:
      - objective: "Enter the Memory Bank"
        description: "Type 'cd Memory_Bank' to enter the folder."
        success_msg: "Transfer Complete. You are inside the Memory Bank."
        conditions:
          # We check TWO things:
          # 1. Did they type the command?
          - type: CommandMatches
            pattern: "^cd.*"
          # 2. Are they actually in the right folder?
          - type: WorkingDir
            path: "Memory_Bank$"

    outro: |
      [LOCATION UPDATED]
      You are now inside the Memory_Bank.

  # --- CHAPTER 3: DATA INPUT (cat) ---
  - title: "Data Processing"
    intro: |
      You are doing well.
      Run 'ls' again. You should see 'Sector_A'.
      Go inside 'Sector_A' and look for a file.
    tasks:
      - objective: "Locate the Data Packet"
        description: "Navigate to Sector_A."
        success_msg: "Sector_A reached."
        conditions:
          - type: WorkingDir
            path: "Sector_A$"

      - objective: "Read the Data Packet"
        description: "Use 'cat welcome_packet.txt' to read the file."
        success_msg: "Data Packet Decoded."
        conditions:
          - type: CommandMatches
            pattern: "^cat.*welcome.*"

    outro: |
      [DATA RECEIVED]
      Congratulations, Unit 734.
      Visuals: ONLINE.
      Motors: ONLINE.
      Processor: ONLINE.
